/***********************************************************
  This file belongs to Logo Carousel plugin
  and it is copyrighted to AlchemyThemes.com
  
  Version: 0.1
  Last update: 23.09.2013
  Author: AlchemyThemes
 ***********************************************************/

(function(e){jQuery.noConflict();e.fn.at_shuffle=function(){var t=this.get(),n=function(e){return Math.floor(Math.random()*e)},r=e.map(t,function(){var r=n(t.length),i=e(t[r]).clone(true)[0];t.splice(r,1);return i});this.each(function(t){e(this).replaceWith(e(r[t]))});return e(r)};at_logoCarouselObj=function(t,n){this.defaults={rows:4,cols:5,height:300,forceFullwidth:false,alignment:"horizontal",bgColor:"transparent",tbPadding:15,lrPadding:30,speed:60,speedRandom:15,verticalDir:"up",horizontalDir:"left",hoverStop:false};this.options=e.extend(true,this.defaults,n);this._source=t;this._itemsNum=0;this._displayW=0;this._itemsW=0;this._itemsH=0;this._arrowClicked=false;if(this._checkDataParams()){if(this._setGeneralStyles()){if(this._checkForceFullwidth()){if(this._cloneLogos()){this._setEvents();this._startAnimations(this.options.speed)}}}}};e.extend(at_logoCarouselObj.prototype,{version:"0.1",_setEvents:function(){var t=this;t._source.find(".at_logo_carousel_dismiss_button").click(function(e){e.preventDefault();t._source.find(".at_logo_carousel_calltoaction_container").fadeOut()});if(t.options.hoverStop){t._source.hover(function(){t._source.find(">ul").each(function(t){e(this).stop(true,false).clearQueue()})},function(){t._restartAnimationFromHover()})}e(window).bind("debouncedresize",function(){t._source.find(">ul").each(function(t){e(this).stop(true,false).clearQueue()});t._startAnimations(t.options.speed);t._source.hover()})},_setGeneralStyles:function(){var t=this;t._source.css({"background-color":t.options.bgColor});if(t.options.alignment=="horizontal"){t._source.addClass("at_horizontal");t._source.find(">ul li").css({margin:t.options.tbPadding+"px "+t.options.lrPadding+"px"});t._source.find(">ul li").each(function(){e(this).width(e(this).width())})}else{t._source.addClass("at_vertical");t._source.css({height:t.options.height});t._source.find(">ul li").css({padding:t.options.tbPadding+"px "+t.options.lrPadding+"px"})}return true},_checkForceFullwidth:function(){var t=this;if(t.options.forceFullwidth==true){var n=t._source.offset().left;var r=t._source.position().left;var i=t._source.offset().right;var s=t._source.position().right;var o=t._source.width();var u=e(document).width();if(n!=r){t._source.css({"margin-left":"-"+n+"px",width:u+"px"})}else{t._source.css({position:"absolute",left:"0px",width:"100%"})}}return true},_createPlaceholder:function(){var e=this;var t=0;if(e.options.alignment=="horizontal"){t=30}var n=e._source.attr("data-carousel-id");if(e.options.forceFullwidth==true){jQuery('<div class="at_logo_carousel_placeholder" id="at_logo_carousel_placeholder_'+n+'"></div>').css({height:e._source.height()+t}).insertAfter(e._source)}return true},_checkDataParams:function(){if(this._source.attr("data-hover-stop")){this.options.hoverStop=this._source.attr("data-hover-stop")}if(this._source.attr("data-rows")){this.options.rows=this._source.attr("data-rows")}if(this._source.attr("data-cols")){this.options.cols=this._source.attr("data-cols")}if(this._source.attr("data-alignment")){this.options.alignment=this._source.attr("data-alignment")}if(this._source.attr("data-height")){this.options.height=this._source.attr("data-height")}if(this._source.attr("data-force-fullwidth")){this.options.forceFullwidth=this._source.attr("data-force-fullwidth")}if(this._source.attr("data-background")){this.options.bgColor=this._source.attr("data-background")}if(this._source.attr("data-topbottom-padding")){this.options.tbPadding=this._source.attr("data-topbottom-padding")}if(this._source.attr("data-leftright-padding")){this.options.lrPadding=this._source.attr("data-leftright-padding")}if(this._source.attr("data-speed")){this.options.speed=this._source.attr("data-speed")}if(this._source.attr("data-speed-random")){this.options.speedRandom=this._source.attr("data-speed-random")}if(this._source.attr("data-vertical-direction")){this.options.verticalDir=this._source.attr("data-vertical-direction")}if(this._source.attr("data-horizontal-direction")){this.options.horizontalDir=this._source.attr("data-horizontal-direction")}return true},_cloneLogos:function(){var t=this;var n=this._source;if(t.options.alignment=="horizontal"){var r=n.find("> ul").eq(0);for(var i=1;i<t.options.rows;i++){r.clone().appendTo(n);n.find("> ul").last().find("li").at_shuffle().at_shuffle()}n.find("> ul").each(function(r){var i=e(this);var s=i.html();do{i.append(s)}while(i.width()>=n.width());i.append(i.html());var o=0;i.find("li").each(function(){var e=jQuery(this);o+=jQuery(this).width()+t.options.lrPadding*2});i.width(o)});t._source.css({height:t._source.height()})}else{var r=n.find("> ul").eq(0);for(var i=1;i<t.options.cols;i++){r.clone().appendTo(n);n.find("> ul").last().find("li").at_shuffle().at_shuffle()}n.find("> ul").each(function(r){var i=e(this);var s=i.html();do{i.append(s)}while(i.height()<=n.height());i.append(i.html());n.find("> ul").css({width:100/t.options.cols+"%",padding:"0px 0px"})})}return true},_startAnimations:function(t){var n=this;var r=this._source;r.find(">ul").each(function(i){var s=Math.floor(Math.random()*(n.options.speedRandom*1e3-100+1))+100;var o=t*1e3+s;e(this).attr("data-speed-timer",o);if(n.options.alignment=="horizontal"){if(n.options.horizontalDir=="left"){jQuery(this).animate({"margin-left":-(jQuery(this).width()-r.width())},o,"linear",function(){n._restartAnimation(jQuery(this),o)})}else{jQuery(this).css({"margin-left":-(jQuery(this).width()-r.width())}).animate({"margin-left":0},o,"linear",function(){n._restartAnimation(jQuery(this),o)})}}else{if(n.options.verticalDir=="up"){jQuery(this).animate({"margin-top":-(jQuery(this).height()-n._source.height())},o,"linear",function(){n._restartAnimation(jQuery(this),o)})}else{jQuery(this).css({"margin-top":-(jQuery(this).height()-n._source.height())}).animate({"margin-top":0},o,"linear",function(){n._restartAnimation(jQuery(this),o)})}}})},_restartAnimationFromHover:function(){var t=this;var n=this._source;n.find(">ul").each(function(r){var i=e(this).attr("data-speed-timer");if(t.options.alignment=="horizontal"){if(t.options.horizontalDir=="left"){var s=0;var o=-(jQuery(this).width()-t._source.width());var u=parseInt(jQuery(this).css("margin-left").replace("px",""),10);var a=u*100/o/100;jQuery(this).animate({"margin-left":-(jQuery(this).width()-n.width())},parseInt(i,10)-parseInt(i,10)*parseFloat(a,10),"linear",function(){t._restartAnimation(jQuery(this),i)})}else{var s=-(jQuery(this).width()-n.width());var o=0;var u=parseInt(jQuery(this).css("margin-left").replace("px",""),10);var a=1-u/s;jQuery(this).animate({"margin-left":0},parseInt(i,10)-parseInt(i,10)*parseFloat(a,10),"linear",function(){t._restartAnimation(jQuery(this),i)})}}else{if(t.options.verticalDir=="up"){var s=0;var o=-(jQuery(this).height()-t._source.height());var u=parseInt(jQuery(this).css("margin-top").replace("px",""),10);var a=u*100/o/100;jQuery(this).animate({"margin-top":-(jQuery(this).height()-t._source.height())},parseInt(i,10)-parseInt(i,10)*parseFloat(a,10),"linear",function(){t._restartAnimation(jQuery(this),i)})}else{var s=-(jQuery(this).height()-n.height());var o=0;var u=parseInt(jQuery(this).css("margin-top").replace("px",""),10);var a=1-u/s;jQuery(this).animate({"margin-top":0},parseInt(i,10)-parseInt(i,10)*parseFloat(a,10),"linear",function(){t._restartAnimation(jQuery(this),i)})}}})},_restartAnimation:function(e,t){var n=this;if(n.options.alignment=="horizontal"){var r=e.width()}else{var r=e.height()}if(n.options.alignment!="horizontal"&&n.options.verticalDir!="up"){var i=e.find("li").slice(e.find("li").length/2-1)}else if(n.options.alignment=="horizontal"&&n.options.horizontalDir!="left"){var i=e.find("li").slice(e.find("li").length/2-1)}else{var i=e.find("li").slice(0,e.find("li").length/2-1)}var s="";i.each(function(){s+=jQuery(this)[0].outerHTML;jQuery(this).remove()});var o=2;if(n.options.alignment=="horizontal"){if(n.options.horizontalDir=="left"){var u=0;e.find("li").each(function(){var e=jQuery(this);u+=jQuery(this).width()+n.options.lrPadding*2});e.css({"margin-left":-(u-n._source.width())});e.append(s);e.animate({"margin-left":-(e.width()-n._source.width())},t/o,"linear",function(){n._restartAnimation(jQuery(this),t)})}else{var u=0;e.find("li").each(function(){var e=jQuery(this);u+=jQuery(this).width()+n.options.lrPadding*2});e.prepend(s);var a=e.width();e.css({"margin-left":-(a-u)});e.animate({"margin-left":0},t/o,"linear",function(){n._restartAnimation(jQuery(this),t)})}}else{if(n.options.verticalDir=="up"){var f=0;e.find("li").each(function(){var e=jQuery(this);f+=jQuery(this).height()+n.options.tbPadding*2});e.css({"margin-top":-(f-n._source.height())});e.append(s);e.animate({"margin-top":-(e.height()-n._source.height())},t/o,"linear",function(){n._restartAnimation(jQuery(this),t)})}else{var f=0;e.find("li").each(function(){var e=jQuery(this);f+=jQuery(this).height()+n.options.tbPadding*2});e.prepend(s);var l=e.height();e.css({"margin-top":-(l-f)});e.animate({"margin-top":0},t/o,"linear",function(){n._restartAnimation(jQuery(this),t)})}}}});e.fn.logoCarousel=function(t){e(this).each(function(){return new at_logoCarouselObj(e(this),t)})}})(jQuery);jQuery(document).ready(function(){jQuery(".at_logo_carousel").each(function(){var e=jQuery(this);e.waitForImages(function(){e.logoCarousel()})})})